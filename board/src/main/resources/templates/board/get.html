<!DOCTYPE html>
<html layout:decorate="~{layouts/layout}">
<head>
<meta charset="utf-8">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<title>get.html</title>

<script th:inline="javascript">
	const bno = [[${board.bno}]];
	window.addEventListener("DOMContentLoaded", function() {
		getReply();
	});
	
	// 댓글 가져오기
	function getReply() {
		const url = `/replies/pages/${bno}/1`;
		fetch(url)
		.then(result => result.json())
		.then(result=>getReplyProc(result))
	}
	// 댓글 결과 처리
	function getReplyProc(result) {
		const replys = document.querySelector(".replys");
		
		result.list.forEach(item => {
			const html = `<div class="row">
							  <div class="col-8">${item.reply}</div>
							  <div class="col-3">${item.replyer}</div>
						  </div>`;
			replys.insertAdjacentHTML("beforeend", html);
		});
	}
</script>

</head>
<body>
<div class="container" layout:fragment="content">
	<table class="table">
		<tr>
			<th>번호</th>
			<td th:text="${board.bno}"></td>
		</tr>
		<tr>
			<th>제목</th>
			<td th:text="${board.title}"></td>
		</tr>
		<tr>
			<th>내용</th>
			<td th:text="${board.content}"></td>
		</tr>
		<tr>
			<th>작성자</th>
			<td th:text="${board.writer}"></td>
		</tr>
		<tr>
			<th>작성일자</th>
			<td th:text="${board.regdate}"></td>
		</tr>		
	</table>
	<button th:onclick="|location.href='modify?bno=${board.bno}'|">수정</button>
	<button th:onclick="|location.href='remove?bno=${board.bno}'|">삭제</button>
	
	<div class="card mt-4">
		<div class="card-head">댓글</div>
		<div class="card-body replys"></div>
	</div>
</div>
</body>
</html>